<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <template id="swedbankpay_template" name="Swedbank Pay Template" inherit_id="website_sale.payment">
    <xpath expr="//div[@id='payment_method']" position="inside">
        <div>
          <script type="text/javascript">
            odoo.define(function (require){
              
              // Hjiack the website sale flow when pressing on "Pay now" button  
              $(".o_payment_form").attr("action", "/payment/swedbankpay/testing");

              // If js-file needs to be load it dinamically instead.
              // var ajax = require('web.ajax');
              // ajax.loadJS("/payment_swedbankpay/static/src/js/swedbankpay.js");
            });
          </script> 
        </div>

        <!-- <div id="payment_method" class="mt-3" t-if="(acquirers or tokens) and website_sale_order.amount_total">
            <h3 class="mb24">Pay with </h3>
            <t t-call="payment.payment_tokens_list">
                <t t-set="mode" t-value="'payment'"/>
                <t t-set="submit_txt">Pay Now</t>
                <t t-set="icon_right" t-value="1"/>
                <t t-set="icon_class" t-value="'fa-chevron-right'"/>
                <t t-set="submit_class" t-value="'btn btn-primary'"/>
                <t t-set="pms" t-value="tokens"/>
                
                <t t-set="form_action" t-value="'/payment/swish/form_action'"/>
                
                <t t-set="prepare_tx_url" t-value="'/shop/payment/transaction/swedbankpay'"/>

                <t t-set="partner_id" t-value="partner"/>

                <t t-set="back_button_icon_class" t-value="'fa-chevron-left'"/>
                <t t-set="back_button_txt">Return to Cart</t>
                <t t-set="back_button_class" t-value="'btn btn-secondary'"/>
                <t t-set="back_button_link" t-value="'/shop/cart'"/>
            </t>
        </div> -->

    </xpath>
  </template>

  <template id="verify_good" name="Verify template">
      <t t-call="portal.frontend_layout">
            <div class="wrap">
                <div class="container o_website_payment">
                    <div class="o_payment_processing">
                        <div class="row">
                            <div class="o_payment_processing_content col-sm-6 col-sm-offset-3">
                              <t t-set="foo" t-value="request.session"/>
                              <h1>Tack för din order!</h1>
                              <p>Your order is now payed</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            </t>
  </template>


  <template id="verify_bad" name="Verify bad template">
      <t t-call="portal.frontend_layout">
            <div class="wrap">
                <div class="container o_website_payment">
                    <div class="o_payment_processing">
                        <div class="row">
                            <div class="o_payment_processing_content col-sm-6 col-sm-offset-3">
                                <p> Din betalning har blivit nekad. Försök gärna igen </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            </t>
  </template>
  
<!--
  This is without <div class="o_payment_processing">, which messes up the error message displayed when the fourth 
  incorrect attempt is made with 3D Secure.
-->
    <template id="verify_bad_2" name="Verify bad template">
      <t t-call="portal.frontend_layout">
            <div class="wrap">
                <div class="container o_website_payment">
                    <div class="row">
                        <div class="o_payment_processing_content col-sm-6 col-sm-offset-3">
                            <p> Din betalning har blivit nekad. Försök gärna igen </p>
                        </div>
                    </div>
                </div>
            </div>
            </t>
  </template>

  <template id="verify_bad_transaction" name="Verify bad template">
        <t t-call="portal.frontend_layout">
            <div class="wrap">
                <div class="container o_website_payment">
                    <div class="o_payment_processing">
                        <div class="row">
                            <div class="o_payment_processing_content col-sm-6 col-sm-offset-3">
                                <p t-esc="message"/>
                            </div>
                        </div>                        
                    </div>
                </div>
            </div>
        </t>
  </template>

</odoo>
